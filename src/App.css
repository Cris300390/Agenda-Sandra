/* =========================
   Agenda Sandra — app.css
   Limpio y listo para móvil
   ========================= */

/* ===== Variables y tema ===== */
:root{
  /* Base */
  --bg-1:#f9f7ff;         /* lila muy claro */
  --bg-2:#fffdfd;         /* casi blanco cálido */
  --card:#ffffff;         /* tarjetas/paneles */
  --text:#1f2937;         /* gris oscuro legible */
  --muted:#6b7280;        /* texto secundario */

  /* Acentos */
  --accent:#e879f9;       /* rosa-lila suave */
  --accent-2:#a78bfa;     /* lila complemento */
  --danger:#ef4444;       /* errores */
  --success:#10b981;      /* ok */

  /* Separadores */
  --slot-sep:#ede9fe;
  --slot-zebra:#faf5ff;

  /* Sombra y radios */
  --shadow:0 10px 25px rgba(0,0,0,.06);
  --radius:16px;

  /* Layout agenda: 2 columnas (tabla + lateral) en escritorio */
  --agenda-cols: 1fr 320px;
}

/* ===== Reset suave / base tipográfica ===== */
*{ box-sizing: border-box; }
html, body, #root{ height: 100%; }

/* Añadimos la propiedad estándar junto a la prefijada (iOS) */
html{
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
}

body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Inter, Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
  color: var(--text);
  background: var(--bg-1);
  line-height: 1.4;
}

/* Contenedor principal opcional (si usas #root centrado) */
#root{
  max-width: 1400px;
  margin: 0 auto;
  padding: clamp(12px, 2vw, 24px);
}

/* ===== Tipos y utilidades ===== */
h1,h2,h3,h4{ margin: 0 0 .5rem; line-height: 1.2; }
p{ margin: 0 0 .75rem; color: var(--text); }
small, .muted{ color: var(--muted); }

.hidden{ display:none!important; }
.sr-only{
  position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0;
}

/* ===== Tarjetas/Panales ===== */
.card{
  background: var(--card);
  border: 1px solid #eee;
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: clamp(12px, 2vw, 20px);
}

/* ===== Botones ===== */
button, .btn{
  appearance: none;           /* estándar */
  -webkit-appearance: none;   /* prefijo WebKit */
  -moz-appearance: none;      /* prefijo Firefox */
  border: 1px solid #e5e7eb;
  background: white;
  color: var(--text);
  border-radius: 12px;
  padding: 8px 12px;
  font-size: 16px;               /* >=16px para evitar auto-zoom en iOS */
  line-height: 1;
  cursor: pointer;
  transition: transform .05s ease, box-shadow .15s ease, background .15s ease;
}
button:hover, .btn:hover{ background:#f9fafb; }
button:active, .btn:active{ transform: translateY(1px); }
button:disabled, .btn:disabled{ opacity:.6; cursor:not-allowed; }

/* Botón primario rosa */
.btn-primary{
  background: linear-gradient(135deg, #f472b6 0%, #ec4899 100%);
  color: #fff;
  border-color: #f59fbc;
  box-shadow: 0 6px 20px rgba(236,72,153,.35);
}
.btn-primary:hover{ filter: brightness(1.02); }
.btn-danger{ background:#fee2e2; color:#b91c1c; border-color:#fecaca; }
.btn-success{ background:#ecfdf5; color:#065f46; border-color:#a7f3d0; }

/* Grupo de botones usado en cabeceras */
.buttons{ display:flex; gap:8px; flex-wrap:wrap; }
.buttons > *{ white-space: nowrap; }

/* ===== Inputs / Selects ===== */
input, select, textarea{
  border:1px solid #e5e7eb;
  border-radius: 10px;
  padding: 8px 10px;
  font-size: 16px;              /* evita zoom iOS */
  outline: none;
  background: #fff;
  color: var(--text);
}

/* Enfocado */
input:focus, select:focus, textarea:focus{
  border-color: #d946ef;
  box-shadow: 0 0 0 3px rgba(217,70,239,.15);
}

/* Quitar flechas en inputs number */
input[type="number"]::-webkit-outer-spin-button,
input[type="number"]::-webkit-inner-spin-button{
  -webkit-appearance: none;
  margin: 0;
}
/* Añadimos también la propiedad estándar para evitar el aviso del linter */
input[type="number"]{
  appearance: none;          /* estándar: elimina “spinners” en navegadores modernos */
  -moz-appearance: textfield;/* Firefox: mantiene estilo de campo de texto */
}

/* ===== Tablas (día) ===== */
table{ width:100%; border-collapse: separate; border-spacing: 0 8px; }
th, td{ text-align:left; vertical-align: top; }
thead th{
  font-weight:700;
  color:#475569;
  font-size:14px;
  padding: 12px 16px;
}
tbody td{
  background: #fff;
  border: 1px solid #eee;
  padding: 12px 14px;
  border-radius: 12px;
}

/* Píldoras de eventos dentro de las celdas */
.pill{
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:8px 12px;
  border-radius:12px;
  color:#fff;
  font-weight:600;
  font-size:13px;
}

/* ===== Mes (calendario) ===== */
.calendar-grid{
  display:grid;
  grid-template-columns: repeat(7, minmax(0, 1fr));
  gap:6px;
}
.calendar-day{
  text-align:left;
  padding:10px;
  border-radius:12px;
  border:1px solid #e2e8f0;
  background:#fff;
  transition: background .15s ease, border-color .15s ease;
}
.calendar-day.is-selected{
  background:#fdf2f8;
  border-color:#ec4899;
}
.calendar-day.is-holiday{
  background:#fee2e2;
  border-color:#f87171;
}
.calendar-day.is-inactive{ opacity:.6; }

/* Badges pequeños dentro de cada día */
.badge{
  display:inline-block;
  border-radius:12px;
  padding:2px 6px;
  font-size:10px;
  font-weight:700;
  color:#fff;
}
.badge-pink{ background:#ec4899; }
.badge-purple{ background:#7c3aed; }

/* ===== Aside resumen ===== */
.aside{
  background:#fafbfc;
  border:1px solid #e2e8f0;
  border-radius:16px;
  padding:18px;
}

/* ===== Modal + bloqueo de scroll ===== */
.body-lock{
  overflow: hidden;          /* sin scroll de fondo */
  touch-action: none;        /* evita bounce en iOS */
}
.modal-backdrop{
  position: fixed; inset: 0;
  background: rgba(0,0,0,.25);
  /* Soporte Safari/iOS */
  -webkit-backdrop-filter: blur(2px);
  backdrop-filter: blur(2px);
}
.modal{
  position: fixed; left:50%; top:50%;
  transform: translate(-50%, -50%);
  background: #fff;
  border-radius: 16px;
  width: min(640px, 92vw);
  max-height: 80dvh;
  overflow:auto;
  padding: 16px;
  box-shadow: 0 25px 50px rgba(0,0,0,.25);
}

/* ===== Scrollbar (suave) — soportado en navegadores modernos ===== */
*{ scrollbar-width: thin; scrollbar-color: #e9d5ff transparent; }
*::-webkit-scrollbar{ height:10px; width:10px; }
*::-webkit-scrollbar-thumb{ background:#e9d5ff; border-radius:999px; }
*::-webkit-scrollbar-track{ background:transparent; }

/* ===== Responsivo ===== */
@media (max-width: 900px){
  /* La tabla del día ocupa todo; el aside pasa abajo */
  :root{ --agenda-cols: 1fr; }
}

/* Afinado extra para móviles pequeños */
@media (max-width: 480px){
  .buttons{ gap:6px; }
  button, .btn{ padding: 9px 10px; font-size: 16px; }
  input, select{ width: 100%; }
  thead th{ font-size:13px; padding:10px 12px; }
  tbody td{ padding:10px 12px; }
}

/* ===== Modo impresión (útil para facturas/listados) ===== */
@media print{
  :root{ --shadow:none; }
  *{ box-shadow:none!important; text-shadow:none!important; }
  .no-print{ display:none!important; }
  body{ background:#fff; }
  a::after{ content:" (" attr(href) ")"; font-size:10px; color:#555; }
}
/* ===== FIX: Modal siempre por encima y con scroll cómodo en móvil ===== */
.modal-backdrop{
  z-index: 9998;                /* por encima de la cabecera */
}

.modal{
  z-index: 9999;                /* por encima del backdrop y de la cabecera */
  /* En móviles, mejor que “flote” con margen en vez de centrado absoluto */
  left: 0; top: 0;
  transform: none;
  margin: 16px;
  width: auto;
  max-height: calc(100dvh - 32px);  /* ocupa casi toda la altura visible */
  overflow: auto;                    /* scroll dentro del modal */
  overscroll-behavior: contain;      /* evita que se mueva el fondo */
  -webkit-overflow-scrolling: touch; /* deslizamiento suave en iOS */
}

/* Un pelín más compacto en pantallas pequeñas */
@media (max-width: 600px){
  .modal{ margin: 12px; max-height: calc(100dvh - 24px); }
}
